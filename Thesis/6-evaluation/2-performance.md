## Σύγκριση αλγορίθμων ως προς την επίδοση {#sec:evaluation:performance}

Στη συγκεκριμένη ενότητα, θα συγκρίνουμε τους αλγορίθμους ως προς την επίδοση τους, δηλαδή ως προς την ικανότητα των πρακτόρων να παρκάρουν. Για να το πετύχουμε αυτό, θα χρησιμοποιήσουμε τις εξής μετρικές:

- **Ποσοστό επιτυχίας**: αποτελεί το προφανές και βασικότερο μέτρο σύγκρισης, της επίδοσης των πρακτόρων.
- **Μέσος αριθμός συγκρούσεων**: ο μέσος αριθμός συγκρούσεων που προκαλεί ο πράκτορας μέχρι να πετύχει το στόχο του, αποτελεί άλλον έναν τρόπο αξιολόγησης της επίδοσης του.
- **Μέσος χρόνος ολοκλήρωσης**: ο μέσος χρόνος που χρειάζεται ο πράκτορας για να ολοκληρώσει το στόχο του είναι μία ακόμα μετρική της ποιότητας της πολιτικής του.

Ωστόσο, επιθυμούμε να συνοψίσουμε τις τρεις αυτές μετρικές, σε ένα ενιαίο σκορ, το οποίο θα υποδηλώνει, πόσο ικανός είναι κάποιος στο παρκάρισμα (τουλάχιστον στα πλαίσια του παιχνιδιού μας). Το τελικό αυτό σκορ θα υπολογίζεται από την εξίσωση \ref{eq:evaluation:performance:score}:
\begin{equation}
\textbf{score} = 70 \times \textbf{success\_rate} + \max\left(20 - 5 \times \textbf{mean\_collisions}, 0\right) + 10 \times \max\left(1 - \frac{\textbf{mean\_time} - 10}{10}, 0\right)
\label{eq:evaluation:performance:score}
\end{equation}

Οι συντελεστές στην παραπάνω εξίσωση αντιπροσωπεύουν τη βαρύτητα (%), που έχει η κάθε μετρική στο τελικό σκορ και επιλέχθηκαν αυθαίρετα. Έτσι, παρατηρούμε πως κάθε παίκτης μπορεί να κερδίσει έως 70 πόντους, με βάση το ποσοστό επιτυχίας του. Έπειτα, 20 πόντοι καθορίζονται από το μέσο αριθμό συγκρούσεων του παίκτη, στα επεισόδια όπου πετυχαίνει το στόχο του, χάνοντας 5 από αυτούς τους πόντους, κάθε φορά που ο μέσος αριθμός συγκρούσεων του αυξάνεται κατά μία μονάδα. Τέλος, οι υπόλοιποι 10 πόντοι, καθορίζονται από το μέσο χρόνο ολοκλήρωσης των επεισοδίων του παίκτη, στα οποία πετυχαίνει τον στόχο του. Συγκεκριμένα, όταν ο μέσος χρόνος του παίκτη, είναι μικρότερος ή ίσος των 10 δευτερολέπτων, τότε ο παίκτης θεωρείται γρήγορος και κερδίζει όλους τους πόντους. Αντίθετα, όταν ο μέσος χρόνος του παίκτη, είναι μεγαλύτερος των 20 δευτερολέπτων, τότε ο παίκτης θεωρείται αργός και δεν κερδίζει κανέναν από αυτούς τους πόντους. Στην περίπτωση που ο μέσος χρόνος του παίκτη, βρίσκεται ανάμεσα στα 10 και 20 δευτερολέπτα, τότε ο παίκτης κερδίζει τον αντίστοιχο αριθμό πόντων, στο διάστημα (0, 10). Με τον τρόπο αυτό, η τιμή 100 του σκορ αντιπροσωπεύει τον τέλειο παίκτη, που παρκάρει σε όλες τις περιπτώσεις, χωρίς να προκαλέσει καμία σύγκρουση και σε αρκετά συντόμο χρόνο.

Στις επόμενες υποενότητες, θα παρουσιάσουμε τις μετρικές αυτές, καθώς και το τελικό σκορ των αλγορίθμων, στα δύο τελευταία επίπεδα δυσκολίας του παιχνιδιού και θα σχολιάσουμε τα αποτελέσματα.

### Επίπεδο δυσκολίας 3 - Άμεση στάθμευση

Στην *Εικόνα @fig:evaluation:performance:success3*, παρουσιάζονται τα ποσοστά επιτυχίας των πρακτόρων κάθε αλγορίθμου, στο επίπεδο δυσκολίας 3.

![Ποσοστά επιτυχίας των πρακτόρων κάθε αλγορίθμου στο επίπεδο δυσκολίας 3.](6-evaluation/figures/success3.png){width=75% #fig:evaluation:performance:success3}

Παρατηρούμε πως όλοι οι αλγόριθμοι βαθιάς ενισχυτικής μάθησης πέτυχαν ποσοστό επιτυχίας άνω του 80%, ενώ οι αλγόριθμοι DDPG και TD3 ξεχωρίζουν, καθώς τα ποσοστά επιτυχίας τους προσεγγίζουν το 100%.

Στην *Εικόνα @fig:evaluation:performance:collisions3*, παρουσιάζονται οι μέσοι αριθμοί συγκρούσεων των πρακτόρων κάθε αλγορίθμου, στο επίπεδο δυσκολίας 3.   

![Μέσοι αριθμοί συγκρούσεων των πρακτόρων κάθε αλγορίθμου στο επίπεδο δυσκολίας 3.](6-evaluation/figures/collisions3.png){width=75% #fig:evaluation:performance:collisions3}

Στο γράφημα αυτό, εκτός από τη μέση τιμή, απεικονίζεται και η τυπική απόκλιση ($\sigma$) των μέσων αριθμών συγκρούσεων των πρακτόρων κάθε αλγορίθμου. Παρατηρούμε πως ξανά, οι αλγόριθμοι δράστη-κριτή έχουν τις καλύτερες επιδόσεις, με τους αλγορίθμους DDPG και TD3 να ξεχωρίζουν. Αντίθετα, ο αλγόριθμος PPO έχει υψηλό μέσο αριθμό συγκρούσεων, καθώς και τυπική απόκλιση αυτού. Επομένως, καταλαβαίνουμε πως η πολιτική που έχει αναπτύξει δεν είναι η βέλτιστη, αφού ακόμα και στα επεισόδια που πετυχαίνει το στόχο του, προκαλεί πρώτα περίπου 2 συγκρούσεις.

Τέλος, στην *Εικόνα @fig:evaluation:performance:time3*, παρουσιάζονται οι μέσοι χρόνοι ολοκλήρωσης των πρακτόρων κάθε αλγορίθμου, στο επίπεδο δυσκολίας 3.

![Μέσοι χρόνοι ολοκλήρωσης των πρακτόρων κάθε αλγορίθμου στο επίπεδο δυσκολίας 3.](6-evaluation/figures/time3.png){width=75% #fig:evaluation:performance:time3}

Παρατηρούμε πως οι μέσοι χρόνοι ολοκλήρωσης των πρακτόρων έχουν αρκετά χαμηλές τιμές, το οποίο αποτελεί θετική ένδειξη για τις επιδόσεις τους. Ξανά, πρωταγωνιστεί ο αλγόριθμος TD3, ο οποίος χρειάζεται λιγότερο από το 1/3 του χρόνου του επεισοδίου για να το κερδίσει, ενώ ακόμα και ο αλγόριθμος με τη χειρότερη επίδοση (PPO), καταφέρνει να ολοκληρώσει το στόχο του σε μόλις 1/2 του χρόνου του επεισοδίου.

Έτσι, προκύπτουν τα τελικά σκορ των αλγορίθμων, για το επίπεδο δυσκολίας 3, τα οποία παρουσιάζονται στην *Εικόνα @fig:evaluation:performance:score3*.

![Τελικά σκορ των αλγορίθμων στο επίπεδο δυσκολίας 3.](6-evaluation/figures/score3.png){width=75% #fig:evaluation:performance:score3}

Παρατηρούμε πως οι αλγόριθμοι TD3 και DDPG πετυχαίνουν τις καλύτερες επιδόσεις στο επίπεδο αυτό, φτάνοντας μάλιστα πολύ κοντά στο τέλειο σκορ. Ακολουθεί ο αλγόριθμος SAC με διαφορά 10 μονάδων, ενώ ο αλγόριθμος PPO καταλαμβάνει την τελευταία θέση, με σημαντική διαφορά από τους υπόλοιπους αλγορίθμους και εμφανή περιθώρια για βελτίωση στην πολιτική του. Επομένως, επιβεβαιώνεται από αυτό το γράφημα, η υπεροχή των αλγορίθμων δράστη-κριτή έναντι των απλούστερων αλγορίθμων βελτιστοποίησης πολιτικής, στην ικανότητα επίλυσης πολύπλοκων προβλημάτων.

$\\$
$\\$

### Επίπεδο δυσκολίας 4 - Κανονική στάθμευση

Στο επίπεδο αυτό, ελέγχεται η πραγματική ικανότητα των πρακτόρων να πάρκαρουν. Προκειμένου να έχουμε ένα πιο οικείο μέτρο σύγκρισης, της ικανότητας αυτής, επιλέξαμε να συγκρίνουμε την τελική επίδοση των πρακτόρων, ενάντια σε αυτήν ενός ανθρώπου, ειδικού στο παιχνίδι. Προσωπικά, μέσα από την κατασκευή του παιχνιδιού, καθώς και τις πολλές τροποποιήσεις που έγιναν κατά τη διαδικασία των εκπαιδεύσεων, έχω αποκτήσει μεγάλη εμπειρία στο παιχνίδι, κι έτσι οι επιδόσεις μου μπορούν να θεωρηθούν ως αυτές ενός ικανού ανθρώπινου παίκτη. Για αυτό, κατέγραψα τις επιδόσεις μου στα 100 επεισόδια αξιολόγησης και τις χρησιμοποίησα ως βάση σύγκρισης για τους πράκτορες.

Χρησιμοποιήθηκε ξανά, η εξίσωση \ref{eq:evaluation:performance:score} για τον υπολογισμό του τελικού σκορ, με τη διαφορά πως πλέον, ο χρόνος των 10 δευτερολέπτων, στον οποίο θεωρείται γρήγορη η ολοκλήρωση του επεισοδίου, έχει αυξηθεί στα 12, ώστε να συνυπολογίσουμε τα 2 επιπλέον δευτερόλεπτα της στάθμευσης. Με βάση αυτά, το τελικό ανθρώπινο σκορ υπολογίστηκε ίσο με 98.442. Αξίζει μάλιστα να σημειωθεί, πως μετά τον υπολογισμό των σκορ των πρακτόρων, αυτά κανονικοποιήθηκαν με βάση το ανθρώπινο σκορ, έτσι ώστε η τιμή 100 να μη συμβολίζει πλέον τη θεωρητικά, τέλεια επίδοση, αλλά την ανθρώπινη επίδοση.

Επομένως, στην *Εικόνα @fig:evaluation:performance:success4*, παρουσιάζονται τα ποσοστά επιτυχίας των παικτών στο επίπεδο δυσκολίας 4.

![Ποσοστά επιτυχίας των παικτών στο επίπεδο δυσκολίας 4.](6-evaluation/figures/success4.png){width=75% #fig:evaluation:performance:success4}

Παρατηρούμε πως το ανθρώπινο ποσοστό επιτυχίας ήταν ακριβώς 100%, ακολουθόμενο στενά από τους αλγορίθμους TD3 και SAC. Αντίθετα, το ποσοστό επιτυχίας του αλγορίθμου DDPG ήταν αρκετά χαμηλό, υποδεικνύοντας πως ο αλγόριθμος αυτός, δεν κατάφερε να λύσει ικανοποιητικά το πολύπλοκο πρόβλημα του επιπέδου δυσκολίας 4.

Στην *Εικόνα @fig:evaluation:performance:collisions4*, φαίνονται οι μέσοι αριθμοί συγκρούσεων των παικτών στο επίπεδο δυσκολίας 4.   

![Μέσοι αριθμοί συγκρούσεων των παικτών στο επίπεδο δυσκολίας 4.](6-evaluation/figures/collisions4.png){width=75% #fig:evaluation:performance:collisions4}

Από το συγκεκριμένο γράφημα επιβεβαιώνεται, πως ούτε οι άνθρωποι είναι τέλειοι, αφού σε ένα από τα 100 επεισόδια αξιολόγησης, προέκυψε μία σύγκρουση. Ο μέσος αριθμός συγκρούσεων του TD3 είναι συγκρίσιμος με τον ανθρώπινο, ενώ αυτός του DDPG είναι επίσης, αρκετά χαμηλός. Αυτό προκαλεί εντύπωση, καθώς βλέπουμε πως στα μισά επεισόδια, στα οποία ο αλγόριθμος καταφέρνει να παρκάρει, το κάνει με αποδοτικό τρόπο. Αντίθετα, η πολιτική που έχει αναπτύξει ο αλγόριθμος SAC είναι λιγότερο αποδοτική, καθώς ο πράκτορας του προκαλεί τουλάχιστον μία σύγκρουση, προτού παρκάρει.

Στην *Εικόνα @fig:evaluation:performance:time4*, φαίνονται οι μέσοι χρόνοι στάθμευσης των παικτών στο επίπεδο δυσκολίας 4.

![Μέσοι χρόνοι στάθμευσης των παικτών στο επίπεδο δυσκολίας 4.](6-evaluation/figures/time4.png){width=75% #fig:evaluation:performance:time4}

Παρατηρούμε πως οι μέσοι χρόνοι στάθμευσης έχουν μικρή απόκλιση μεταξύ των παικτών, καθώς μόλις 2 δευτερόλεπτα χωρίζουν τον πρώτο (άνθρωπος) με τον τελευταίο (αλγόριθμος SAC). Ξανά, είναι αξιοσημείωτο το γεγονός πως ο DDPG, παρά το μικρό ποσοστό επιτυχίας του, πετυχαίνει τα καλύτερα αποτελέσματα μεταξύ των αλγορίθμων.

Έτσι, προκύπτουν τα τελικά, κανονικοποιημένα σκορ των αλγορίθμων, για το επίπεδο δυσκολίας 4, τα οποία παρουσιάζονται στην *Εικόνα @fig:evaluation:performance:score4*.

![Τελικά σκορ των αλγορίθμων στο επίπεδο δυσκολίας 4, κανονικοποιημένα ως προς τις ανθρώπινες επιδόσεις.](6-evaluation/figures/score4.png){width=75% #fig:evaluation:performance:score4}

Παρατηρούμε πως το τελικό σκορ του αλγορίθμου TD3 (97.62), είναι πολύ κοντά στο ανθρώπινο σκορ. Είναι ενδιαφέρον, το πως ένας αλγόριθμος ενισχυτικής μάθησης, με μόλις 2.5 ημέρες εκπαίδευσης του (και μάλιστα, σε ένα αρκετά παρωχημένο υπολογιστικά, σύστημα), κατάφερε να προσεγγίσει τις ανθρώπινες επιδόσεις σε ένα τόσο πολύπλοκο πρόβλημα, όπως αυτό της στάθμευσης. Επίσης, αρκετά υψήλό είναι το σκορ του αλγορίθμου SAC, ενώ ακολουθεί με σημαντική διαφορά, ο αλγόριθμος DDPG, του οποίου η απλή προσέγγιση δεν στάθηκε ικανή, για την αξιόπιστη επίλυση του δυσκολότερου προβλήματος. 

$\\$
$\\$