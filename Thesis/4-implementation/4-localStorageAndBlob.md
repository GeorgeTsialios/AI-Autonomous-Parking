## Τοπική αποθήκευση δεδομένων και μεγάλα δυαδικά αρχεία {#sec:implementation:localAndBlob}

Η βάση δεδομένων που προσφέρει το Firestore είναι κατάλληλη για τα δεδομένα της εφαρμογής, τα οποία πρέπει να είναι προσβάσιμα από όλους τους πελάτες (clients), δηλαδή όλες τις συσκευές και τους φυλλομετρητές. Ωστόσο, υπάρχουν στοιχεία προς αποθήκευση, τα οποία δεν μπορούν ή δεν ενδείκνυται να αποθηκευτούν με αυτή τη μορφή στο Firestore.

Αρχικά, ρυθμίσεις της εφαρμογής, όπως είναι η γλώσσα και η εμφάνιση δεν εξαρτώνται από τον λογαριασμό του χρήστη, ούτε από τον τρέχοντα οργανισμό. Αντίθετα, ανήκουν σε κάθε συσκευή και πρέπει να αποθηκεύονται τοπικά σε αυτή. Για τον σκοπό αυτό, χρησιμοποιούμε τη βιβλιοθήκη **Shared Preferences** του Flutter, η οποία επιτρέπει την τοπική αποθήκευση δεδομένων στη συσκευή, όπως καθορίζεται από την υποκείμενη πλατφόρμα.

Επιπλέον, δεδομένα που δεν ενδείκνυται να αποθηκευτούν στο Firestore αποτελούν και τα μεγάλα δυαδικά αρχεία (binary large objects - BLOB), όπως οι εικόνες προφίλ των εργαζομένων, οι εικόνες ομάδων και τοποθεσιών. Για την αποθήκευση τέτοιων αρχείων, χρησιμοποιούμε το **Storage**, ένα προϊόν του Firebase για αυτόν τον σκοπό. Η επικοινωνία με το Storage πραγματοποιείται επίσης μέσω του Firebase SDK. Επίσης, στο Firestore αποθηκεύουμε ένα αναγνωριστικό των αρχείων στα αντίστοιχα έγγραφα (documents), ώστε να μπορούμε να κάνουμε τις σωστές ανακτήσεις δεδομένων (π.χ. στο πεδίο *profilePicture* του εγγράφου *m.stathoulia*, αποθηκεύουμε το αναγνωριστικό από το Storage της εικόνας προφίλ του χρήστη *Μαργαρίτα Σταθούλια*).